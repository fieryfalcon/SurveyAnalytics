(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},435:(e,t,s)=>{Promise.resolve().then(s.bind(s,7849))},6710:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(5155),a=s(63),n=s(2619),l=s.n(n);function o(){let e=(0,a.usePathname)(),t=[{name:"Dashboard",path:"/",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{name:"Surveys",path:"/analytics",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}];return(0,r.jsxs)("aside",{className:"w-64 bg-gradient-to-b from-gray-900 via-gray-900 to-gray-800 text-white min-h-screen flex flex-col shadow-2xl",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-800",children:(0,r.jsx)("div",{className:"flex justify-center items-center",children:(0,r.jsx)("img",{src:"/logo.png",alt:"eZAIX Logo",className:"w-48 h-auto object-contain transform hover:scale-105 transition-transform duration-300"})})}),(0,r.jsx)("nav",{className:"flex-1 p-4",children:(0,r.jsx)("div",{className:"space-y-2",children:t.map(t=>{var s;return(0,r.jsxs)(l(),{href:t.path,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ".concat("/"===(s=t.path)&&"/"===e||"/"!==s&&e.startsWith(s)?"bg-orange-500 text-white shadow-lg":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[t.icon,(0,r.jsx)("span",{className:"font-medium",children:t.name})]},t.path)})})}),(0,r.jsx)("div",{className:"p-6 border-t border-gray-800",children:(0,r.jsxs)("div",{className:"mt-4 text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 font-semibold uppercase tracking-wider",children:"Powered by"}),(0,r.jsx)("p",{className:"text-sm font-bold bg-gradient-to-r from-orange-500 to-red-600 bg-clip-text text-transparent",children:"eZAIX"})]})})]})}},7849:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),a=s(2115),n=s(63),l=s(6710);let o={photo_release:"Photo Use Consent Form",townhall:"Town Hall Feedback",grant:"Grant Application",event_feedback:"Event Feedback",employee_satisfaction:"Employee Satisfaction",training_feedback:"Training Feedback",general_survey:"General Survey",Unknown:"Uncategorized"},i=e=>o[e]||e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");function c(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[d,x]=(0,a.useState)({departments:[],categories:[]}),[h,m]=(0,a.useState)(!0),[u,g]=(0,a.useState)(""),[p,y]=(0,a.useState)(""),[f,b]=(0,a.useState)(""),[j,v]=(0,a.useState)("created_at"),[N,w]=(0,a.useState)("desc"),[k,_]=(0,a.useState)(1),[C,S]=(0,a.useState)(10);(0,a.useEffect)(()=>{L(),M()},[]),(0,a.useEffect)(()=>{A(),_(1)},[t,u,p,f,j,N]);let L=async()=>{try{m(!0);let e="https://accurately-living-phoenix.ngrok-free.app";console.log("\uD83D\uDD17 Fetching surveys from:","".concat(e,"/analytics/surveys"));let t=await fetch("".concat(e,"/analytics/surveys"),{headers:{"ngrok-skip-browser-warning":"true"}});if(!t.ok)throw Error("Failed to fetch surveys: ".concat(t.status));let r=await t.json();s(r)}catch(e){console.error("Error fetching surveys:",e)}finally{m(!1)}},M=async()=>{try{let e=await fetch("".concat("https://accurately-living-phoenix.ngrok-free.app","/analytics/filter-options"),{headers:{"ngrok-skip-browser-warning":"true"}});if(!e.ok)throw Error("Failed to fetch filter options: ".concat(e.status));let t=await e.json();x(t)}catch(e){console.error("Error fetching filter options:",e)}},A=()=>{let e=[...t];if(u){let t=u.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t))}p&&(e=e.filter(e=>e.creator_department===p)),f&&(e=e.filter(e=>e.template_key===f)),e.sort((e,t)=>{let s=0;return"created_at"===j?s=(e.created_at?new Date(e.created_at).getTime():0)-(t.created_at?new Date(t.created_at).getTime():0):"question_count"===j?s=e.question_count-t.question_count:"response_count"===j&&(s=e.response_count-t.response_count),"asc"===N?s:-s}),c(e)},E=e=>{j===e?w("asc"===N?"desc":"asc"):(v(e),w("desc"))},W=Math.ceil(o.length/C),B=(k-1)*C,F=B+C,P=o.slice(B,F),D=e=>{_(Math.max(1,Math.min(e,W)))},q=e=>j!==e?(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):"asc"===N?(0,r.jsx)("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):(0,r.jsx)("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});return h?(0,r.jsxs)("div",{className:"flex h-screen",children:[(0,r.jsx)(l.A,{}),(0,r.jsx)("main",{className:"flex-1 premium-gradient",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("div",{className:"text-2xl font-semibold text-gray-700",children:"Loading Surveys..."})]})})})]}):(0,r.jsxs)("div",{className:"flex h-screen",children:[(0,r.jsx)(l.A,{}),(0,r.jsx)("main",{className:"flex-1 premium-gradient overflow-auto",children:(0,r.jsx)("div",{className:"p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 via-orange-600 to-red-600 rounded-2xl flex items-center justify-center mr-4 shadow-2xl transform hover:scale-105 transition-transform duration-300",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white drop-shadow-lg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Survey Analytics"}),(0,r.jsx)("p",{className:"text-base text-gray-600",children:"Explore detailed analytics for all surveys"})]})]})})}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Search Surveys"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by title or description...",value:u,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400 absolute left-3 top-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Department"}),(0,r.jsxs)("select",{value:p,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"",children:"All Departments"}),d.departments.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category"}),(0,r.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"",children:"All Categories"}),d.categories.map(e=>(0,r.jsx)("option",{value:e,children:i(e)},e))]})]})]}),(u||p||f)&&(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"Active Filters:"}),u&&(0,r.jsxs)("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:['Search: "',u,'"']}),p&&(0,r.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:["Dept: ",p]}),f&&(0,r.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:["Category: ",i(f)]})]}),(0,r.jsx)("button",{onClick:()=>{g(""),y(""),b(""),_(1)},className:"px-4 py-2 text-sm font-semibold text-gray-700 hover:text-orange-600 transition-colors",children:"Clear All Filters"})]}),(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:B+1})," to"," ",(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:Math.min(F,o.length)})," of"," ",(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:o.length})," surveys",o.length!==t.length&&(0,r.jsxs)("span",{className:"text-gray-500",children:[" (filtered from ",t.length," total)"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-gray-600",children:"Show:"}),(0,r.jsxs)("select",{value:C,onChange:e=>{S(Number(e.target.value)),_(1)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:10,children:"10"}),(0,r.jsx)("option",{value:25,children:"25"}),(0,r.jsx)("option",{value:50,children:"50"}),(0,r.jsx)("option",{value:100,children:"100"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Title"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>E("created_at"),children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["Created",q("created_at")]})}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Department"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>E("question_count"),children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:["Questions",q("question_count")]})}),(0,r.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>E("response_count"),children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:["Responses",q("response_count")]})}),(0,r.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===P.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("svg",{className:"w-16 h-16 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-600",children:"No surveys found"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Try adjusting your filters"})]})})}):P.map(t=>{var s;return(0,r.jsxs)("tr",{onClick:()=>e.push("/analytics/survey?id=".concat(t._id)),className:"hover:bg-orange-50 cursor-pointer transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:t.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500 truncate max-w-md",children:t.description})]})}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:(s=t.created_at)?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:t.creator_department}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:i(t.template_key)}),(0,r.jsx)("td",{className:"px-6 py-4 text-center",children:(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-blue-100 text-blue-700",children:t.question_count})}),(0,r.jsx)("td",{className:"px-6 py-4 text-center",children:(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-green-100 text-green-700",children:t.response_count})}),(0,r.jsx)("td",{className:"px-6 py-4 text-center",children:(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ".concat("active"===t.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:t.status})})]},t._id)})})]})}),o.length>C&&(0,r.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>D(1),disabled:1===k,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"First"}),(0,r.jsx)("button",{onClick:()=>D(k-1),disabled:1===k,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:Array.from({length:Math.min(5,W)},(e,t)=>{let s;return s=W<=5||k<=3?t+1:k>=W-2?W-4+t:k-2+t,(0,r.jsx)("button",{onClick:()=>D(s),className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors ".concat(k===s?"bg-orange-500 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:s},s)})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>D(k+1),disabled:k===W,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,r.jsx)("button",{onClick:()=>D(W),disabled:k===W,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Last"})]})]})]})]})})})]})}}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=435)),_N_E=e.O()}]);