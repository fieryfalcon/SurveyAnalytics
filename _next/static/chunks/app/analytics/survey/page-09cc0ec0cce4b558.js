(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[504],{63:(e,t,s)=>{"use strict";var a=s(7260);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},720:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),r=s(63),n=s(2115),l=s(6710);let i=(0,s(7909).default)(()=>Promise.all([s.e(776),s.e(111)]).then(s.bind(s,9492)),{loadableGenerated:{webpack:()=>[9492]},ssr:!1});function o(){let e=(0,r.useSearchParams)().get("id"),[t,s]=(0,n.useState)(null),[o,d]=(0,n.useState)(!0),[c,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{x()},[e]);let x=async()=>{try{d(!0),console.log("Fetching survey detail for ID: ".concat(e));let t=await fetch("".concat("https://accurately-living-phoenix.ngrok-free.app","/analytics/survey/").concat(e),{headers:{"ngrok-skip-browser-warning":"true"}});if(!t.ok)throw Error("Failed to fetch survey: ".concat(t.status));let a=await t.json();console.log("Survey data:",a),s(a),u(null)}catch(e){console.error("Error fetching survey detail:",e),u(e instanceof Error?e.message:"Failed to load survey details")}finally{d(!1)}};return e?o?(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(l.A,{}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-500 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading survey details..."})]})})]}):c||!t?(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(l.A,{}),(0,a.jsx)("div",{className:"flex-1 p-8",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-red-700",children:"Error Loading Survey"}),(0,a.jsx)("p",{className:"text-red-600 mt-2",children:c||"Survey not found"})]})})})]}):(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(l.A,{}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsx)("div",{className:"p-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-2xl shadow-lg p-8 text-white",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-3",children:t.title}),(0,a.jsx)("p",{className:"text-orange-100 mb-4",children:t.description}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-orange-100",children:"Category"}),(0,a.jsx)("div",{className:"text-lg font-semibold mt-1",children:t.category})]}),(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-orange-100",children:"Department"}),(0,a.jsx)("div",{className:"text-lg font-semibold mt-1",children:t.department})]}),(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-orange-100",children:"Status"}),(0,a.jsx)("div",{className:"text-lg font-semibold mt-1 capitalize",children:t.status})]}),(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-orange-100",children:"Responses"}),(0,a.jsx)("div",{className:"text-lg font-semibold mt-1",children:t.response_count})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Question Analytics"}),t.questions.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsxs)("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-semibold",children:["Q",e.question_number]}),(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold capitalize",children:e.question_type})]}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.question_text})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Responses"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:e.response_count})]})]})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:["choice"===e.question_type&&(e=>{let t=e.analysis,s=(null==t?void 0:t.option_counts)||{},r=(null==t?void 0:t.option_percentages)||{},n=e.options,l=n.map(e=>s[e]||0),o=n.map(e=>r[e]||0);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(i,{options:{chart:{type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,borderRadius:8,dataLabels:{position:"right"}}},colors:["#f97316"],dataLabels:{enabled:!0,formatter:function(e,t){return"".concat(e," (").concat(o[t.dataPointIndex],"%)")},style:{fontSize:"12px",colors:["#1f2937"]},offsetX:30},xaxis:{categories:n,title:{text:"Number of Responses"}},yaxis:{labels:{style:{fontSize:"12px"}}},tooltip:{y:{formatter:function(e,t){return"".concat(e," responses (").concat(o[t.dataPointIndex],"%)")}}}},series:[{name:"Responses",data:l}],type:"bar",height:Math.max(250,40*n.length)}),(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-700",children:"Response Summary"}),(0,a.jsx)("div",{className:"space-y-2",children:n.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[l[t]," responses"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["(",o[t],"%)"]})]})]},t))})]})]})})(e),"rating"===e.question_type&&(e=>{let t=e.analysis,s=(null==t?void 0:t.average)||0,r=(null==t?void 0:t.rating_min)||1,n=(null==t?void 0:t.rating_max)||5,l=(null==t?void 0:t.rating_distribution)||{},o=[],d=[];for(let e=r;e<=n;e++)o.push(e.toString()),d.push(l[e.toString()]||0);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.toFixed(2)}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Average Rating"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:n}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Max Rating"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:Object.values(l).reduce((e,t)=>e+t,0)}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Total Responses"})]})]}),(0,a.jsx)(i,{options:{chart:{type:"bar",toolbar:{show:!1}},plotOptions:{bar:{borderRadius:8,columnWidth:"60%"}},colors:["#3b82f6"],dataLabels:{enabled:!0,style:{fontSize:"12px",colors:["#1f2937"]}},xaxis:{categories:o,title:{text:"Rating"}},yaxis:{title:{text:"Number of Responses"}},tooltip:{y:{formatter:function(e){return"".concat(e," responses")}}}},series:[{name:"Number of Responses",data:d}],type:"bar",height:300})]})})(e),"text"===e.question_type&&(e=>{let t=e.analysis,s=(null==t?void 0:t.text_responses)||[],r=(null==t?void 0:t.average_length)||0;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-indigo-600",children:[r.toFixed(1)," characters"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Average Response Length"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-700",children:["Text Responses (",s.length,")"]}),(0,a.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:s.length>0?s.map((e,t)=>(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:e})},t)):(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No text responses available."})})]})]})})(e)]})]},e.question_id))]})]})})})]}):(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(l.A,{}),(0,a.jsx)("div",{className:"flex-1 p-8",children:(0,a.jsx)("div",{className:"text-center text-red-600",children:"No survey ID provided"})})]})}function d(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{className:"flex h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-500 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}),children:(0,a.jsx)(o,{})})}},1150:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=s(5155),r=s(2115),n=s(4437);function l(e){return{default:e&&"default"in e?e.default:e}}s(6552);let i={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},s=(0,r.lazy)(()=>t.loader().then(l)),o=t.loading;function d(e){let l=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,d=i?r.Suspense:r.Fragment,c=t.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(d,{...i?{fallback:l}:{},children:c})}return d.displayName="LoadableComponent",d}},3055:(e,t,s)=>{Promise.resolve().then(s.bind(s,720))},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{bindSnapshot:function(){return l},createAsyncLocalStorage:function(){return n},createSnapshot:function(){return i}});let s=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw s}getStore(){}run(){throw s}exit(){throw s}enterWith(){throw s}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function n(){return r?new r:new a}function l(e){return r?r.bind(e):a.bind(e)}function i(){return r?r.snapshot():function(e,...t){return e(...t)}}},4437:(e,t,s)=>{"use strict";function a(e){let{reason:t,children:s}=e;return s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),s(4553)},6278:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let a=s(8140)._(s(1150));function r(e,t){var s;let r={};"function"==typeof e&&(r.loader=e);let n={...r,...t};return(0,a.default)({...n,modules:null==(s=n.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6552:(e,t,s)=>{"use strict";function a(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),s(5155),s(7650),s(8567),s(7278)},6710:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155),r=s(63),n=s(2619),l=s.n(n);function i(){let e=(0,r.usePathname)(),t=[{name:"Dashboard",path:"/",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{name:"Surveys",path:"/analytics",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}];return(0,a.jsxs)("aside",{className:"w-64 bg-gradient-to-b from-gray-900 via-gray-900 to-gray-800 text-white min-h-screen flex flex-col shadow-2xl",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-800",children:(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsx)("img",{src:"/logo.png",alt:"eZAIX Logo",className:"w-48 h-auto object-contain transform hover:scale-105 transition-transform duration-300"})})}),(0,a.jsx)("nav",{className:"flex-1 p-4",children:(0,a.jsx)("div",{className:"space-y-2",children:t.map(t=>{var s;return(0,a.jsxs)(l(),{href:t.path,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ".concat("/"===(s=t.path)&&"/"===e||"/"!==s&&e.startsWith(s)?"bg-orange-500 text-white shadow-lg":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[t.icon,(0,a.jsx)("span",{className:"font-medium",children:t.name})]},t.path)})})}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-800",children:(0,a.jsxs)("div",{className:"mt-4 text-center",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 font-semibold uppercase tracking-wider",children:"Powered by"}),(0,a.jsx)("p",{className:"text-sm font-bold bg-gradient-to-r from-orange-500 to-red-600 bg-clip-text text-transparent",children:"eZAIX"})]})})]})}},7828:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,s(4054).createAsyncLocalStorage)()},7909:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(6278),r=s.n(a)},8567:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=s(7828)}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=3055)),_N_E=e.O()}]);